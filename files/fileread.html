<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reading Files &mdash; Introduction to Computer Science in C# 30 Nov 2021 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Path Strings" href="paths.html" />
    <link rel="prev" title="Writing Files" href="filewrite.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #922247" >
            <a href="../index.html" class="icon icon-home"> Introduction to Computer Science in C#
          </a>
              <div class="version">
                30 Nov 2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../context/context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">C# Data and Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/functions.html">Defining Functions of your Own</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basicstringops/basicstringops.html">Basic String Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../decisions/decisions.html">Decisions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../while/while.html">While Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foreach/foreach.html">Foreach Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for/for.html">For Loops</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="files.html">Files, Paths, and Directories</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fileabstraction.html">Files As Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="filewrite.html">Writing Files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Reading Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="paths.html">Path Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html">Directory Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html#file-class">File Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmdline-execution.html">Command Line Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="fio.html">FIO Helper Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewfiles.html">Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../arrays/arrays.html">Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lists/lists.html">Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dictionaries/dictionaries.html">Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/classes.html">Classes and Object-Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/interfaces.html">Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recursion/recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/datastructures.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #922247" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Introduction to Computer Science in C#</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="files.html">Files, Paths, and Directories</a> &raquo;</li>
      <li>Reading Files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/files/fileread.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="reading-files">
<span id="fileread"></span><span id="index-0"></span><h1>Reading Files<a class="headerlink" href="#reading-files" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>In Xamarin Studio, go to project <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/print_first_file">print_first_file</a>.  Note that we have added a copy of
<code class="file docutils literal notranslate"><span class="pre">sample.txt</span></code> as a project file, so it is an existing file in the project folder.
You can open it and see that it is a copy of the file created in the last section.</p>
<p>It will be true of most all the programs for this chapter, but you might check that we have
modified the project Output Path to refer to the project folder,
in this case with the path ending
<code class="docutils literal notranslate"><span class="pre">examples/print_first_file</span></code>.  This means <code class="file docutils literal notranslate"><span class="pre">sample.txt</span></code> will be in the
current directory when the program runs.</p>
<p>Run the example program
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/print_first_file/print_first_file.cs">print_first_file/print_first_file.cs</a>, shown below:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">IntroCS</span>
<span class="p">{</span>
   <span class="k">class</span> <span class="nc">PrintFirstFile</span>  <span class="c1">// basics of reading file lines</span>
   <span class="p">{</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="n">StreamReader</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="s">&quot;sample.txt&quot;</span><span class="p">);</span>
         <span class="kt">string</span> <span class="n">line</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>  <span class="c1">// first line</span>
         <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
         <span class="n">line</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>         <span class="c1">// second line</span>
         <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
         <span class="n">reader</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now you have read a file and used it in a program.</p>
<p>In the first line of <code class="docutils literal notranslate"><span class="pre">Main</span></code> the operating system file (<code class="docutils literal notranslate"><span class="pre">sample.txt</span></code>) is
associated again with a C# variable name (<code class="docutils literal notranslate"><span class="pre">reader</span></code>),
this time for reading as a <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> object.
A <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> can only open an existing file, so
<code class="docutils literal notranslate"><span class="pre">sample.txt</span></code> must already exist.</p>
<p>Again we have parallel names to those used with <code class="docutils literal notranslate"><span class="pre">Console</span></code>,
but in this case the <code class="docutils literal notranslate"><span class="pre">ReadLine</span></code> method returns the next line from the file.
Here the string from the file line is assigned to
the variable <code class="docutils literal notranslate"><span class="pre">line</span></code>. Each call the ReadLine reads the
next line of the file.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">Close</span></code> method is
generally optional with files being read. There is nothing to lose
if a program ends without closing a file that was being read. <a class="footnote-reference brackets" href="#readclose" id="id1">1</a></p>
<section id="reading-to-end-of-stream">
<span id="endofstream"></span><span id="index-1"></span><h2>Reading to End of Stream<a class="headerlink" href="#reading-to-end-of-stream" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">first_file.cs</span></code>, we explicitly coded reading two lines.  You will often
want to process each line in a file, without knowing the total number of
lines at the time when you were programming.
This means that files provide us with our
second kind of a sequence:  the sequence of lines in the file!
To process all of them will require a loop and a new test to make sure that you
have not yet come to the end of the file‚Äôs stream: You can use the <code class="docutils literal notranslate"><span class="pre">EndOfStream</span></code>
property. It has the wrong sense (true at the end of the file), so we negate it,
testing for <code class="docutils literal notranslate"><span class="pre">!reader.EndOfStream</span></code> to <em>continue</em> reading.
The example program <code class="docutils literal notranslate"><span class="pre">print_file_lines.cs</span></code>
reads and prints the contents of a file specified by the
user, one line at a time:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">IntroCS</span>
<span class="p">{</span>
   <span class="k">class</span> <span class="nc">PrintFileLines</span>  <span class="c1">// demo of using EndOfStream test</span>
   <span class="p">{</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="kt">string</span> <span class="n">userFileName</span> <span class="p">=</span> <span class="n">UI</span><span class="p">.</span><span class="n">PromptLine</span><span class="p">(</span><span class="s">&quot;Enter name of file to print: &quot;</span><span class="p">);</span>
         <span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="n">userFileName</span><span class="p">);</span>
         <span class="k">while</span> <span class="p">(!</span><span class="n">reader</span><span class="p">.</span><span class="n">EndOfStream</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">string</span> <span class="n">line</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
         <span class="p">}</span>
         <span class="n">reader</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="index-2">
<dt><code class="docutils literal notranslate"><span class="pre">var</span></code></dt><dd><p>For conciseness (and variety) we declared <code class="docutils literal notranslate"><span class="pre">reader</span></code>
using the more compact syntax with <code class="docutils literal notranslate"><span class="pre">var</span></code>:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="n">userFileName</span><span class="p">);</span>
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">var</span></code> in place of a declared type to shorten your code
with a couple of restrictions:</p>
<ul class="simple">
<li><p>Use an initializer, from which the type of the variable can be inferred.</p></li>
<li><p>Declare a local variable inside a method body or in a loop heading.</p></li>
<li><p>Declare only a single variable in the statement.</p></li>
</ul>
<p>We could have used this syntax long ago, but as the type names become longer,
it is more useful!</p>
</dd>
</dl>
<p>You can run this program. You need an existing file to read.  An obvious file is
the source file itself:  <code class="file docutils literal notranslate"><span class="pre">print_file_lines.cs</span></code>.</p>
<p>Things to note about reading from files:</p>
<ul class="simple" id="index-3">
<li><p>Reading from a file returns the part read, of course.  Never forget the
<em>side effect</em>:  The location in the file advances past the part just read.
The next read does <em>not</em> return the <em>same</em> thing as last time.  It returns
the <em>next</em> part of the file.</p></li>
<li><p>Our <code class="docutils literal notranslate"><span class="pre">while</span></code> test conditions so far have been in a sense ‚Äúbackward looking‚Äù:
We have tested a variable that has <em>already been set</em>.
The test with <code class="docutils literal notranslate"><span class="pre">EndOfStream</span></code> is
<em>forward looking</em>:  looking at what has not been processed yet.  Other than
making sure the file is opened, there is no variable that needs to be set
before a <code class="docutils literal notranslate"><span class="pre">while</span></code> loop testing for <code class="docutils literal notranslate"><span class="pre">EndOfStream</span></code>.</p></li>
<li><p>If you use ReadLine at the end of the file, the special value <code class="docutils literal notranslate"><span class="pre">null</span></code> (no object)
is returned.  <em>This</em> is not an error, but if you try to apply any string methods
to the <code class="docutils literal notranslate"><span class="pre">null</span></code> value returned, <em>then</em> you get an error!</p></li>
</ul>
<p id="readtoend"><span id="index-4"></span>Though <code class="docutils literal notranslate"><span class="pre">print_file_lines.cs</span></code> was a nice simple illustration of a loop reading
lines, it was very verbose considering the final effect of the program,
just to print the whole file.
You can read the entire remaining contents of a file
as a single (multiline) string, using the
<code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> method <code class="docutils literal notranslate"><span class="pre">ReadToEnd</span></code>.  In place of the reading and printing
loop we could have just had:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span> <span class="n">wholeFile</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadToEnd</span><span class="p">();</span>
<span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">wholeFile</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ReadToEnd</span></code> does not strip off a newline, unlike <code class="docutils literal notranslate"><span class="pre">ReadLine</span></code>,
so we do not want to add an extra newline
when writing.  We use the <code class="docutils literal notranslate"><span class="pre">Write</span></code> method instead of <code class="docutils literal notranslate"><span class="pre">WriteLine</span></code>.</p>
</section>
<section id="example-sum-numbers-in-file">
<span id="index-5"></span><h2>Example: Sum Numbers in File<a class="headerlink" href="#example-sum-numbers-in-file" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>We have summed the numbers from 1 to <code class="docutils literal notranslate"><span class="pre">n</span></code>.  In that case we generated
the next number <code class="docutils literal notranslate"><span class="pre">i</span></code> automatically using <code class="docutils literal notranslate"><span class="pre">i++</span></code>.  We could also read numbers
from a file containing one number per line (plus possible white space):</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="kt">int</span> <span class="nf">CalcSum</span><span class="p">(</span><span class="kt">string</span> <span class="n">filename</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">sum</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
   <span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
   <span class="k">while</span> <span class="p">(!</span><span class="n">reader</span><span class="p">.</span><span class="n">EndOfStream</span><span class="p">)</span> <span class="p">{</span>
      <span class="kt">string</span> <span class="n">sVal</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">().</span><span class="n">Trim</span><span class="p">();</span>
      <span class="n">sum</span> <span class="p">+=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">sVal</span><span class="p">);</span>
   <span class="p">}</span>
   <span class="n">reader</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
   <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="index-6">Below and in <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/sum_file/sum_file.cs">sum_file/sum_file.cs</a> is a more elaborate, complete example,
that also exits gracefully if you give a bad file name.
If you give a good file name, it skips lines that contain only whitespace.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">IntroCS</span>
<span class="p">{</span>
   <span class="k">class</span> <span class="nc">SumFile</span>  <span class="c1">// sum a file integers, one per line</span>
   <span class="p">{</span>
      <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="kt">string</span> <span class="n">filename</span> <span class="p">=</span> <span class="n">UI</span><span class="p">.</span><span class="n">PromptLine</span><span class="p">(</span>
                              <span class="s">&quot;Enter the name of a file of integers: &quot;</span><span class="p">);</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">File</span><span class="p">.</span><span class="n">Exists</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;The sum is {0}&quot;</span><span class="p">,</span> <span class="n">CalcSum</span><span class="p">(</span><span class="n">filename</span><span class="p">));</span>
         <span class="p">}</span>
         <span class="k">else</span> <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Bad file name {0}&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">);</span>
         <span class="p">}</span>
      <span class="p">}</span>

      <span class="c1">/// Open, read and close the named file and</span>
      <span class="c1">/// return the sum of an int from</span>
      <span class="c1">/// each line that is not just white space.</span>
      <span class="k">static</span> <span class="kt">int</span> <span class="nf">CalcSum</span><span class="p">(</span><span class="kt">string</span> <span class="n">filename</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">sum</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
         <span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
         <span class="k">while</span> <span class="p">(!</span><span class="n">reader</span><span class="p">.</span><span class="n">EndOfStream</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">string</span> <span class="n">sVal</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">().</span><span class="n">Trim</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">sVal</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
               <span class="n">sum</span> <span class="p">+=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">sVal</span><span class="p">);</span>
            <span class="p">}</span>
         <span class="p">}</span>
         <span class="n">reader</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
         <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A useful function used in <code class="docutils literal notranslate"><span class="pre">Main</span></code> for avoiding filename typo errors
is <code class="docutils literal notranslate"><span class="pre">File.Exists</span></code> in the <code class="docutils literal notranslate"><span class="pre">System.IO</span></code> namespace</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="n">File</span><span class="p">.</span><span class="n">Exists</span><span class="p">(</span><span class="kt">string</span> <span class="n">filenamePath</span><span class="p">)</span>
</pre></div>
</div>
<p>It is true if the named files exists in the operating system‚Äôs file structure.</p>
<p>You should see the files <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/sum_file/numbers.txt">sum_file/numbers.txt</a> and
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/sum_file/numbers2.txt">sum_file/numbers2.txt</a> in the Xamarin Studio project.  You can test
with them.  It is important to test all paths through the program: also do
put in a bad name and see that the program exits gracefully, as intended.</p>
<p>For files in the current folder, you can just use the plain file name.
For other folders see <a class="reference internal" href="paths.html#path-strings"><span class="std std-ref">Path Strings</span></a>.</p>
<section id="safe-sum-file-exercise">
<span id="safe-sum-file-ex"></span><span id="index-7"></span><h3>Safe Sum File Exercise<a class="headerlink" href="#safe-sum-file-exercise" title="Permalink to this headline">ÔÉÅ</a></h3>
<ol class="loweralpha">
<li><p>Copy <code class="file docutils literal notranslate"><span class="pre">sum_file.cs</span></code> to a file <code class="file docutils literal notranslate"><span class="pre">safe_sum_file.cs</span></code> in a new project of yours.
<em>Be sure to modify the Output path option to just refer to the project folder!</em>
Modify the program: Write
a new function with the heading below.  Use it in <code class="docutils literal notranslate"><span class="pre">Main</span></code>, in place of the <code class="docutils literal notranslate"><span class="pre">if</span></code>
statement that checks (only once) for a legal file:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Prompt the user to enter a file name to open for reading.</span>
<span class="c1">// Repeat until the name of an existing file is given.</span>
<span class="c1">// Open and return the file.</span>
<span class="k">public</span> <span class="k">static</span> <span class="n">StreamReader</span> <span class="nf">PromptFile</span><span class="p">(</span><span class="kt">string</span> <span class="n">prompt</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>A user who completely forgot the file name could be stuck in an infinite loop!
Elaborate the function and program, so that an empty line entered means
‚Äúgive up‚Äù, and <code class="docutils literal notranslate"><span class="pre">null</span></code> (no object) should be returned.  The main program needs to
test for this and quit gracefully in that case.</p></li>
</ol>
</section>
</section>
<section id="example-copy-to-upper-case">
<h2>Example Copy to Upper Case<a class="headerlink" href="#example-copy-to-upper-case" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>Here is a simple fragment from example file <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/copy_upper/copy_upper.cs">copy_upper/copy_upper.cs</a>.
It copies a file line by line to a new file in upper case:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamReader</span><span class="p">(</span><span class="s">&quot;text.txt&quot;</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">writer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamWriter</span><span class="p">(</span><span class="s">&quot;upper_text.txt&quot;</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(!</span><span class="n">reader</span><span class="p">.</span><span class="n">EndOfStream</span><span class="p">)</span> <span class="p">{</span>
   <span class="kt">string</span> <span class="n">line</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>
   <span class="n">writer</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">());</span>
<span class="p">}</span>
<span class="n">reader</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
<span class="n">writer</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
</pre></div>
</div>
<p>You may test this in the Xamarin Studio example project copy_upper:</p>
<ol class="arabic simple">
<li><p>Expand the copy_upper project in the Solution pad.  The project
includes the input file.  You may not see it at first.  You need to expand the folder
for <code class="file docutils literal notranslate"><span class="pre">bin</span></code> and then <code class="file docutils literal notranslate"><span class="pre">Debug</span></code>.  You see <code class="file docutils literal notranslate"><span class="pre">text.txt</span></code>.</p></li>
<li><p>To see
what else is in the project directory,
select
‚ÄúOpen Containing Folder‚Äù or ‚ÄúOpen in Finder‚Äù on a Mac.
You should see project file <code class="file docutils literal notranslate"><span class="pre">text.txt</span></code> but not <code class="file docutils literal notranslate"><span class="pre">upper_text.txt</span></code>.
Leave that operating system file folder open.</p></li>
<li><p>Go back to Xamarin Studio and run the project.  Now look at the
operating system folder again.  You should see <code class="file docutils literal notranslate"><span class="pre">upper_text.txt</span></code>.
You can open it and see that it holds an upper case version of the contents
of <code class="file docutils literal notranslate"><span class="pre">text.txt</span></code>.</p></li>
</ol>
<p>This is another case where the <code class="docutils literal notranslate"><span class="pre">ReadToEnd</span></code> function could have eliminated the loop.
<a class="footnote-reference brackets" href="#finalnewline" id="id2">2</a></p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span> <span class="n">contents</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">ReadToEnd</span><span class="p">();</span>
<span class="n">writer</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">contents</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">());</span>
</pre></div>
</div>
<dl class="footnote brackets">
<dt class="label" id="readclose"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>If, for some reason, you want to reread this same file while the
same program is running, you need to close it and reopen it.</p>
</dd>
<dt class="label" id="finalnewline"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Besides the speed and efficiency of this second approach,
there is also a technical improvement:  There may or may not be
a newline at the end of the very last line of the file.  The <code class="docutils literal notranslate"><span class="pre">ReadLine</span></code>
method works either way, but does not let you know the difference.
In the line-by-line version, there is always a newline after the
final line written with <code class="docutils literal notranslate"><span class="pre">WriteLine</span></code>.
The <code class="docutils literal notranslate"><span class="pre">ReadToEnd</span></code> version will have newlines exactly matching the input.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="filewrite.html" class="btn btn-neutral float-left" title="Writing Files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="paths.html" class="btn btn-neutral float-right" title="Path Strings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2021, Andrew N. Harrington and George Thiruvathukal.
      <span class="lastupdated">Last updated on 30-November-2021 00:26:56.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>