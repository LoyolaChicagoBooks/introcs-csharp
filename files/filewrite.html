<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Writing Files &mdash; Introduction to Computer Science in C# 29 Nov 2021 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reading Files" href="fileread.html" />
    <link rel="prev" title="Files As Streams" href="fileabstraction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #922247" >
            <a href="../index.html" class="icon icon-home"> Introduction to Computer Science in C#
          </a>
              <div class="version">
                29 Nov 2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../context/context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">C# Data and Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/functions.html">Defining Functions of your Own</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basicstringops/basicstringops.html">Basic String Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../decisions/decisions.html">Decisions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../while/while.html">While Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foreach/foreach.html">Foreach Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for/for.html">For Loops</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="files.html">Files, Paths, and Directories</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fileabstraction.html">Files As Streams</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Writing Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileread.html">Reading Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="paths.html">Path Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html">Directory Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html#file-class">File Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmdline-execution.html">Command Line Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="fio.html">FIO Helper Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewfiles.html">Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../arrays/arrays.html">Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lists/lists.html">Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dictionaries/dictionaries.html">Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/classes.html">Classes and Object-Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/interfaces.html">Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recursion/recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/datastructures.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #922247" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Introduction to Computer Science in C#</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="files.html">Files, Paths, and Directories</a> &raquo;</li>
      <li>Writing Files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/files/filewrite.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="writing-files">
<span id="filewrite"></span><span id="index-0"></span><h1>Writing Files<a class="headerlink" href="#writing-files" title="Permalink to this headline"></a></h1>
<p>Thus far we have only used the Console class for input and output,
so we have neither read nor written data from/to files.</p>
<p>By default Xamarin Studio places data files in a place that makes sense for advanced
projects, but not for our usage.  Thus far it has not mattered, and we
have left the default directory structure alone.  Now, however, it matters,
and will be a lot simpler if we make a small change to the setup of all our projets using
data files. This will also simplify command-line usage when we get to it.</p>
<p>Try the following:</p>
<ol class="arabic">
<li><p>In Xamarin Studio go to the example project <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/first_file">first_file</a>.  Double click
on the project line in the Solution pad to open the Options dialog.
(If this does not work for some
reason you can also open the drop-down project menu and select Options.)</p></li>
<li><p>In the left column of the dialog under Build, the last entry should be Output.  Click on it.
The output path entry should end with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>examples/first_file
</pre></div>
</div>
<p>This is <em>not</em> the way Xamarin sets it up by default.
Originally Output Path ended with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>examples/first_file/bin/$(Configuration)
</pre></div>
</div>
<p>This version has the extra <code class="docutils literal notranslate"><span class="pre">/bin/$(Configuration)</span></code>.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you create a new project to
use data files, make sure the  <code class="docutils literal notranslate"><span class="pre">/bin/$(Configuration)</span></code> is <em>removed</em>
from the end of this Output Path field.</p>
</div>
<p>Now let us examine the files here.</p>
<ol class="arabic simple">
<li><p>In the dropdown menu for the <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/first_file">first_file</a> project, select
“Open Containing Folder” on Windows
or “Reveal in Finder” on a Mac.  In any event the selection opens the project folder
in the operating system, showing all the files, not just the ones you see listed in
Xamarin in the project.</p></li>
<li><p>Look at the folder. You should <em>not</em> see a file <code class="file docutils literal notranslate"><span class="pre">sample.txt</span></code>.   Keep the folder handy.</p></li>
<li><p>Now build (not run yet ) the first_file project.</p></li>
<li><p>Look at the operating system folder again.  You should now see build products,
<code class="file docutils literal notranslate"><span class="pre">first_file.exe</span></code>, the executable file, and <code class="file docutils literal notranslate"><span class="pre">first_file.exe.mdb</span></code>,
extra debugging information if there are errors in execution.</p></li>
<li><p>Now run the program.  This program does <em>not</em> produce output to the screen,
so just close the execution window.</p></li>
<li><p>The program did do something:  Look at the operating system folder again.
Now you <em>should</em> see a file <code class="file docutils literal notranslate"><span class="pre">sample.txt</span></code>.
This is a file created by the program you ran.</p></li>
</ol>
<p>Here is the program:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">IntroCS</span>
<span class="p">{</span>
   <span class="k">class</span> <span class="nc">FirstFile</span>  <span class="c1">// basics of file writing</span>
   <span class="p">{</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="n">StreamWriter</span> <span class="n">writer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StreamWriter</span><span class="p">(</span><span class="s">&quot;sample.txt&quot;</span><span class="p">);</span>
         <span class="n">writer</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;This program is writing&quot;</span><span class="p">);</span>
         <span class="n">writer</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;our first file.&quot;</span><span class="p">);</span>
         <span class="n">writer</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="index-1">Look at the code.  Note the extra namespace being used at the top.  You will
always need to be using <code class="docutils literal notranslate"><span class="pre">System.IO</span></code> when working with files.  Here is a slightly
different use of a dot, <code class="docutils literal notranslate"><span class="pre">.</span></code>, to indicate a <em>subsidiary</em> namespace.</p>
<p>The first line of <code class="docutils literal notranslate"><span class="pre">Main</span></code> creates a <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code> object assigned to the
variable  <code class="docutils literal notranslate"><span class="pre">writer</span></code>.  A <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code>
links C# to your
computer’s file system for writing, not reading.
Files are objects, like a Random, and use the <code class="docutils literal notranslate"><span class="pre">new</span></code> syntax to create a new one.
The parameter in the constructor
gives the name of the file to connect to the program, <code class="docutils literal notranslate"><span class="pre">sample.txt</span></code> - the same
as the file name we saw created by the program.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the file already existed,  the old contents are
<em>destroyed</em> silently by creating a <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code>.</p>
</div>
<p>If you do not use
any operating system directory separators in the name (<code class="docutils literal notranslate"><span class="pre">'\'</span></code> or <code class="docutils literal notranslate"><span class="pre">'/'</span></code>,
depending on your operating system), then the file will lie in the
<em>current directory</em>, discussed more shortly.  The Xamarin Studio default is for this
current directory to be the bin/Debug subdirectory.  Our change to the output path
converts it so the <em>current directory</em> is the main project folder.</p>
<p>The second and third lines of <code class="docutils literal notranslate"><span class="pre">Main</span></code> write the specified strings to lines in the file.
Note that the <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code> object <code class="docutils literal notranslate"><span class="pre">writer</span></code>, not <code class="docutils literal notranslate"><span class="pre">Console</span></code>,
comes before the dot and <code class="docutils literal notranslate"><span class="pre">WriteLine</span></code>.
This is yet another variation on the use of a dot, <code class="docutils literal notranslate"><span class="pre">.</span></code>:  between an object and
a function tied to this object.  In this situation the function tied to an object
is more specifically called a <em>method</em>, in object-oriented terminology.  All the
uses of a dot (except for a numerical literal value) share a common idea, indicating
a named part or attribute of a larger thing.</p>
<p>The last line of <code class="docutils literal notranslate"><span class="pre">Main</span></code> is important for cleaning up. Until this line, this
C# program controls the file, and nothing may be actually
written to the operating system file yet:  Since initiating a file operation
is thousands of times
slower than memory operations, C# <em>buffers</em> data, saving small
amounts and writing a larger chunk all at once.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The call to the <code class="docutils literal notranslate"><span class="pre">Close</span></code> method
is essential for C# to make sure everything is really
written, and to relinquish control of the file for use by
other programs.</p>
</div>
<p>It is a common bug
to write a program where you have the code to add all the data you
want to a file, but the program does not end up creating a file.
Usually this means you forgot to close the file!</p>
<p>If you were to run the program from the command line instead of from Xamarin Studio,
the file would appear in the current directory.</p>
<p id="index-2">Just as you can use a <a class="reference internal" href="../data/writeline-substitution.html#format-strings"><span class="std std-ref">String Format Operation</span></a> with
functions <code class="docutils literal notranslate"><span class="pre">Write</span></code> and <code class="docutils literal notranslate"><span class="pre">WriteLine</span></code> of the <code class="docutils literal notranslate"><span class="pre">Console</span></code> class,
you can also use a format string with the corresponding methods of a
<code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code>, and embed fields by using braces in
the format string.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fileabstraction.html" class="btn btn-neutral float-left" title="Files As Streams" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="fileread.html" class="btn btn-neutral float-right" title="Reading Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012, Andrew N. Harrington and George Thiruvathukal.
      <span class="lastupdated">Last updated on 29-November-2021 23:38:47.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>