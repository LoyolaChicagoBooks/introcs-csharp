<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rationals Revisited &mdash; Introduction to Computer Science in C# 30 Nov 2021 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Csproject Revisited" href="csproj-revisited.html" />
    <link rel="prev" title="Interfaces" href="interfaces.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #922247" >
            <a href="../index.html" class="icon icon-home"> Introduction to Computer Science in C#
          </a>
              <div class="version">
                30 Nov 2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../context/context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">C# Data and Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/functions.html">Defining Functions of your Own</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basicstringops/basicstringops.html">Basic String Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../decisions/decisions.html">Decisions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../while/while.html">While Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foreach/foreach.html">Foreach Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for/for.html">For Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files/files.html">Files, Paths, and Directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arrays/arrays.html">Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lists/lists.html">Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dictionaries/dictionaries.html">Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/classes.html">Classes and Object-Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">Testing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="interfaces.html">Interfaces</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Rationals Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="csproj-revisited.html">Csproject Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewinterfaces.html">Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../recursion/recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/datastructures.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #922247" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Introduction to Computer Science in C#</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="interfaces.html">Interfaces</a> &raquo;</li>
      <li>Rationals Revisited</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/interfaces/fractions-revisited.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rationals-revisited">
<span id="index-0"></span><span id="id1"></span><h1>Rationals Revisited<a class="headerlink" href="#rationals-revisited" title="Permalink to this headline"></a></h1>
<p>C# has a built-in method to sort a List.  <code class="docutils literal notranslate"><span class="pre">List</span></code> is a
generic type, however, so how does C# know how to do
comparisons for all different types?  Is this
specially programmed in for built-in types, or
can it be extended to user-defined types?</p>
<p>In fact it can be extended to user defined types,
such as our Rational.
To sort objects, you only need to be able to do one
thing: indicate which object comes before another.
We can do that.  The <code class="docutils literal notranslate"><span class="pre">CompareTo</span></code> method
already does that.  If Rational r1 is less than
Rational r2, then</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">r1</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="p">&lt;</span> <span class="m">0</span>
</pre></div>
</div>
<p>The single CompareTo method is very versatile:  Just by varying
the comparison with 0, you vary the corresponding
comparison of Rationals:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">r1.CompareTo(r2)</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> means r1 &lt; r2</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">r1.CompareTo(r2)</span> <span class="pre">&lt;=</span> <span class="pre">0</span></code> means r1 &lt;= r2</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">r1.CompareTo(r2)</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> means r1  &gt; r2</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">r1.CompareTo(r2)</span> <span class="pre">&gt;=</span> <span class="pre">0</span></code> means r1 &gt;= r2</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">r1.CompareTo(r2)</span> <span class="pre">==</span> <span class="pre">0</span></code> means r1 is equal to r2</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">r1.CompareTo(r2)</span> <span class="pre">!=</span> <span class="pre">0</span></code> means r1 is not equal to r2</div>
</div>
<p>None of the other methods for Rationals make any difference for
sorting:  Just this one method is needed.  Of course the
comparison of strings or doubles are done with
totally different implementations, but they have methods
with the same name, <code class="docutils literal notranslate"><span class="pre">CompareTo</span></code>, and with the same abstract
meaning.  Still C# is strongly typed and we are talking about
totally different types.</p>
<p>An <em>interface</em> allows us to group diverse classes under one
interface type.  An interface just focuses on the commonality of behavior
in one or more methods among the different classes.
Interface types, like classes can also be generic.
For sorting we are only concerned
with one method, <code class="docutils literal notranslate"><span class="pre">CompareTo</span></code>.  We want it to be able to compare to another
object of the same type.</p>
<p>C# defines a generic interface <code class="docutils literal notranslate"><span class="pre">IComparable&lt;T&gt;</span></code>.  A type T can satisfy this interface if
if has a public instance method with signature:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="kt">int</span> <span class="nf">CompareTo</span><span class="p">(</span><span class="n">T</span> <span class="n">other</span><span class="p">);</span>
</pre></div>
</div>
<p id="index-1">There is one more step before we can use a library method to sort:
Although the signature shown above for <code class="docutils literal notranslate"><span class="pre">CompareTo</span></code> is the
one that C# requires to be able to satisfy the <code class="docutils literal notranslate"><span class="pre">Icomparable&lt;T&gt;</span></code> interface,
it does not
automatically assume that this is your <em>intention</em>.
You must explicitly say that you <em>want</em> your class
to be considered to satisfy this interface.
For instance for Rational, we need to change
the class heading to:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">Rational</span> <span class="p">:</span> <span class="n">IComparable</span><span class="p">&lt;</span><span class="n">Rational</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>In general one or more interface names can be listed
after the class name and a colon,
and before the opening brace of the class body.
This particular interface is defined in
System.Collections.Generic, so we need to be using that namespace.</p>
<p>The project <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interfaces">interfaces</a>
has the modified <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interfaces/rational.cs">rational.cs</a>
and <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interfaces/test_rational_sort.cs">test_rational_sort.cs</a>
to test this with a list of Rationals:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">IntroCS</span>
<span class="p">{</span>
<span class="c1">/// Use IComparable&lt;Rational&gt; interface to sort Rationals.</span>
   <span class="k">class</span> <span class="nc">TestRationalSort</span>
   <span class="p">{</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">List</span><span class="p">&lt;</span><span class="n">Rational</span><span class="p">&gt;</span> <span class="n">nums</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Rational</span><span class="p">&gt;();</span>
         <span class="n">nums</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Rational</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">));</span>
         <span class="n">nums</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Rational</span><span class="p">(</span><span class="m">11</span><span class="p">,</span> <span class="m">3</span><span class="p">));</span>
         <span class="n">nums</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Rational</span><span class="p">(-</span><span class="m">1</span><span class="p">,</span> <span class="m">10</span><span class="p">));</span>
         <span class="n">nums</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Rational</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">));</span>
         <span class="n">nums</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Rational</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">));</span>
         <span class="n">nums</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Rational</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">));</span>
         <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Before sorting: &quot;</span> <span class="p">+</span> <span class="n">ListString</span><span class="p">(</span><span class="n">nums</span><span class="p">));</span>
         <span class="n">nums</span><span class="p">.</span><span class="n">Sort</span><span class="p">();</span>
         <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;After sorting:  &quot;</span> <span class="p">+</span> <span class="n">ListString</span><span class="p">(</span><span class="n">nums</span><span class="p">));</span>
      <span class="p">}</span>

      <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">ListString</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Rational</span><span class="p">&gt;</span> <span class="n">list</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">string</span> <span class="n">s</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
         <span class="k">foreach</span> <span class="p">(</span><span class="n">Rational</span> <span class="n">r</span> <span class="k">in</span> <span class="n">list</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">s</span> <span class="p">+=</span> <span class="n">r</span> <span class="p">+</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>which prints:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Before sorting: 1/2 11/3 -1/10 2/5 2/3 1/3
After sorting:  -1/10 1/3 2/5 1/2 2/3 11/3
</pre></div>
</div>
<p id="index-2">Interfaces are very handy for dealing with the <em>common</em> abstract behavior of
different objects and different underlying class, but if an object is
declared to be of interface type the compiler no longer sees the attributes
that are <em>not</em> common to the interface.  A silly example, legal as far
as it goes:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IComparable</span><span class="p">&lt;</span><span class="n">Rational</span><span class="p">&gt;</span> <span class="n">r1</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rational</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">5</span><span class="p">),</span>
                      <span class="n">r2</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rational</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">r1</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">);</span> <span class="c1">// prints false</span>
</pre></div>
</div>
<p>The declarations are legal because a Rational does have interface type
<code class="docutils literal notranslate"><span class="pre">IComparable&lt;Rational&gt;</span></code>.  The use of <code class="docutils literal notranslate"><span class="pre">CompareTo</span></code> is legal
because that is the one method that this interface type guarantees.</p>
<p>However, if we add this extra line:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">r1</span><span class="p">.</span><span class="n">Multiply</span><span class="p">(</span><span class="n">r2</span><span class="p">));</span> <span class="c1">// compiler error!</span>
</pre></div>
</div>
<p>Even though r1 and r2 are actually Rational underneath, where the
Multiply method is legal, their declaration as only their interface type
<em>hides</em> this extra functionality from the compiler. <a class="footnote-reference brackets" href="#actualtype" id="id2">1</a></p>
<dl class="footnote brackets">
<dt class="label" id="actualtype"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>It is possible to deal with the actual underlying class type, but this gets
more complicated.  It is better discussed in a course that more fully
explores <em>inheritance</em>.</p>
</dd>
</dl>
<section id="interface-syntax-examples">
<span id="index-3"></span><span id="id3"></span><h2>Interface Syntax Examples<a class="headerlink" href="#interface-syntax-examples" title="Permalink to this headline"></a></h2>
<p>In the previous section we showed a realistic application of an existing
interface.  It was in a fairly sophisticated class with a lot of other things
included.  Now you can look at examples that are designed to highlight syntax
for interfaces without distractions.  They are very simple and artificial.</p>
<p>There is a comment at the bottom of each file explaining the new
features introduced.  Like all our other examples, they compile and
run as given.  After running an example, see if the notes
include instructions to delete or comment out parts or
uncomment lines.  If so, follow instructions and try to compile again.
Check that the change causes a compiler error.</p>
<p>Look through and process these examples in order:</p>
<p><a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax1/interface_demo1.cs">interface_syntax1/interface_demo1.cs</a>,
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax2/interface_demo2.cs">interface_syntax2/interface_demo2.cs</a>,
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax3/interface_demo3.cs">interface_syntax3/interface_demo3.cs</a>,
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax4/interface_demo4.cs">interface_syntax4/interface_demo4.cs</a>,
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax5/interface_demo5.cs">interface_syntax5/interface_demo5.cs</a>,
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax6/interface_demo6.cs">interface_syntax6/interface_demo6.cs</a>,
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax7/interface_demo7.cs">interface_syntax7/interface_demo7.cs</a>,
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/interface_syntax8/interface_demo8.cs">interface_syntax8/interface_demo8.cs</a></p>
<p>After looking at those simple bare examples illustrating the syntax,
go on to the next section <a class="reference internal" href="csproj-revisited.html#csproject-revisited"><span class="std std-ref">Csproject Revisited</span></a>,
where a useful, more sophisticated user-defined interface
is introduced….</p>
<section id="example-class-sorting-worked-exercise">
<h3>Example Class Sorting - Worked Exercise<a class="headerlink" href="#example-class-sorting-worked-exercise" title="Permalink to this headline"></a></h3>
<p>In <a class="reference internal" href="../classes/classexamples.html#more-getters-and-setters"><span class="std std-ref">More Getters and Setters</span></a> we introduced example
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/example_class/example_class.cs">example_class/example_class.cs</a>.</p>
<p>Elaborate the code for the <code class="docutils literal notranslate"><span class="pre">Example</span></code> class, adding
a <code class="docutils literal notranslate"><span class="pre">CompareTo</span></code> method.
The rules for comparison are:</p>
<ol class="arabic simple">
<li><p>An object
with a larger <code class="docutils literal notranslate"><span class="pre">n</span></code> value is considered larger.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">n</span></code>
values are the same, then the object with the larger <code class="docutils literal notranslate"><span class="pre">d</span></code>
value is considered larger.</p></li>
<li><p>If they completely match, then they are equal, of course.</p></li>
</ol>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">Main</span></code> driver to merely test sorting:
create and sort a list of <code class="docutils literal notranslate"><span class="pre">Example</span></code>
elements.  Show the before and after sequence in the list.</p>
<p>You can compare your solution to ours:
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/example_class2/example_class2.cs">example_class2/example_class2.cs</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="interfaces.html" class="btn btn-neutral float-left" title="Interfaces" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="csproj-revisited.html" class="btn btn-neutral float-right" title="Csproject Revisited" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2021, Andrew N. Harrington and George Thiruvathukal.
      <span class="lastupdated">Last updated on 30-November-2021 00:26:56.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>