<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Csproject Revisited &mdash; Introduction to Computer Science in C# 30 Nov 2021 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Chapter Review Questions" href="reviewinterfaces.html" />
    <link rel="prev" title="Rationals Revisited" href="fractions-revisited.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #922247" >
            <a href="../index.html" class="icon icon-home"> Introduction to Computer Science in C#
          </a>
              <div class="version">
                30 Nov 2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../context/context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">C# Data and Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/functions.html">Defining Functions of your Own</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basicstringops/basicstringops.html">Basic String Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../decisions/decisions.html">Decisions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../while/while.html">While Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foreach/foreach.html">Foreach Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for/for.html">For Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files/files.html">Files, Paths, and Directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arrays/arrays.html">Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lists/lists.html">Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dictionaries/dictionaries.html">Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes/classes.html">Classes and Object-Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">Testing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="interfaces.html">Interfaces</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fractions-revisited.html">Rationals Revisited</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Csproject Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewinterfaces.html">Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../recursion/recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/datastructures.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #922247" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Introduction to Computer Science in C#</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="interfaces.html">Interfaces</a> &raquo;</li>
      <li>Csproject Revisited</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/interfaces/csproj-revisited.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="csproject-revisited">
<span id="id1"></span><h1>Csproject Revisited<a class="headerlink" href="#csproject-revisited" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>The <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/cs_project1">cs_project1</a> project skeleton was set up with the different commands
in different classes, keeping related things together.</p>
<p>On the other hand they had high level structure in common.
Similar names were consciously used for methods:</p>
<ul class="simple">
<li><p>Each command needed to Execute</p></li>
<li><p>Each command needed to have Help for the user.</p></li>
</ul>
<p>The corresponding names made it somewhat easier to follow
the part of the Game constructor
with the additions to the <code class="docutils literal notranslate"><span class="pre">helpDetails</span></code> Dictionary.
Also there is repetitive logic in
the crucial <code class="docutils literal notranslate"><span class="pre">proccessCommand</span></code> method.</p>
<p>In a game with more possible commands, the code
would only get more repetitious!
You would like to think of having a loop to replace the
repetitious code.</p>
<p>A major use of a C# interface will allow this all to work
in neat loops.
For the first time we define our own interface, and
use that interface as a type in a declaration.</p>
<p>While we are at this we can refactor our code further:
classes that give a response to a command all obviously have their
Execute and Help methods.  They also have a command word
to call them.  We can further encapsulate
all data for the response by having the classes themselves
be able to announce the command that calls them.
We add a string property CommandWord to each of them.</p>
<p>We will add an extra convenience feature of C# here.
Thus far we have used private instance variables and public
getter methods.  We can use a public instance variable declaration
with a similar effect as in:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="kt">string</span> <span class="n">CommandName</span> <span class="p">{</span><span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;}</span>
</pre></div>
</div>
<p>The extra syntax in braces says that users in a another class
may freely <em>get</em> (read) the variable, but setting the variable is
still <em>private</em>: it may only be done inside the class.  This is more
concise than using a getter method:  No getter needs to be declared;
referencing the data is shorter too, since it is a property,
no method parentheses are needed.</p>
<p>Note the unusual syntax: the declaration does
not end with a semicolon.  The only semicolons are inside the braces.
You will not be required to code with this notation, but it surely is neater than
using a getter method!</p>
<p>Now we can define our own interface taking all of these common features
together.  Since each is a response to a command, we will call our interface
Response:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nn">IntroCS</span>
<span class="p">{</span>
<span class="c1">/// Object that responds to a command</span>
   <span class="k">public</span> <span class="k">interface</span> <span class="n">Response</span>
   <span class="p">{</span>
      <span class="c1">/// Execute cmd.</span>
      <span class="c1">/// Return true if the game is over; false otherwise</span>
      <span class="kt">bool</span> <span class="nf">Execute</span><span class="p">(</span><span class="n">Command</span> <span class="n">cmd</span><span class="p">);</span>

      <span class="c1">/// Return a Help string for the command</span>
      <span class="kt">string</span> <span class="nf">Help</span><span class="p">();</span>

      <span class="kt">string</span> <span class="n">CommandName</span> <span class="p">{</span>
         <span class="k">get</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Things to note:</p>
<ul class="simple">
<li><p>The heading has the reserved word <code class="docutils literal notranslate"><span class="pre">interface</span></code> instead of class.</p></li>
<li><p>All the common method headings and the property declaration
are listed.</p></li>
<li><p>See what is missing!  In place of each method
body is just a semicolon.</p></li>
<li><p>Everything in an interface is public.
The part of the property about private access is merely omitted.</p></li>
</ul>
<p>We are going to need a collection if we want to simplify the code with
loops.  We could use code like the following, assuming we already declared
the objects helper, goer, and quitter:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Response</span><span class="p">[]</span> <span class="n">resp</span> <span class="p">=</span> <span class="p">{</span><span class="n">helper</span><span class="p">,</span> <span class="n">goer</span><span class="p">,</span> <span class="n">quitter</span><span class="p">};</span>
</pre></div>
</div>
<p>See how we use Response as a declaration type!
Each of the objects in the declaration list <em>is</em>
in fact a Response.</p>
<p>Now that we can process
with this collection and <code class="docutils literal notranslate"><span class="pre">foreach</span></code> loops,
we do not need the object names we gave at all:
We can just put new objects in the initialization sequence!</p>
<p>Now that we can think of these different objects as being of the same type, we can see
the processCommand logic, with its repetitive <code class="docutils literal notranslate"><span class="pre">if</span></code> statement syntax is just trying
to match a command word with the proper Response, so a Dictionary is what makes sense!</p>
<p>In fact all the logic for combining the various Responses is now moved into
CommandMapper, and the the CommandMapper constructor creates the Dictionary
used to look up the Response that goes with each command word.  Here is the whole code for
ResponseMapper, taking advantage of the Dictionary in other methods, too.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">namespace</span> <span class="nn">IntroCS</span>
<span class="p">{</span>

<span class="c1">/// Map commands names to commands.</span>
   <span class="k">public</span> <span class="k">class</span> <span class="nc">CommandMapper</span>
   <span class="p">{</span>
      <span class="k">public</span> <span class="kt">string</span> <span class="n">AllCommands</span> <span class="p">{</span>
         <span class="k">get</span><span class="p">;</span>
         <span class="k">private</span> <span class="k">set</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">private</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Response</span><span class="p">&gt;</span> <span class="n">responses</span><span class="p">;</span> <span class="c1">//responses to commands</span>

      <span class="c1">/// Initialize the command response mapping</span>
      <span class="c1">///  game The game being played.</span>
      <span class="k">public</span> <span class="nf">CommandMapper</span><span class="p">(</span><span class="n">Game</span> <span class="n">game</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">responses</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Response</span><span class="p">&gt;();</span>
         <span class="n">Response</span><span class="p">[]</span> <span class="n">resp</span> <span class="p">=</span> <span class="p">{</span>
            <span class="k">new</span> <span class="nf">Quitter</span><span class="p">(),</span>
            <span class="k">new</span> <span class="nf">Goer</span><span class="p">(</span><span class="n">game</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Helper</span><span class="p">(</span><span class="n">responses</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
            <span class="c1">// add new Responses here!</span>
         <span class="p">};</span>
         <span class="n">AllCommands</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
         <span class="k">foreach</span> <span class="p">(</span><span class="n">Response</span> <span class="n">r</span> <span class="k">in</span> <span class="n">resp</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">responses</span><span class="p">[</span><span class="n">r</span><span class="p">.</span><span class="n">CommandName</span><span class="p">]</span> <span class="p">=</span> <span class="n">r</span><span class="p">;</span>
            <span class="n">AllCommands</span> <span class="p">+=</span> <span class="n">r</span><span class="p">.</span><span class="n">CommandName</span> <span class="p">+</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
         <span class="p">}</span>
      <span class="p">}</span>

      <span class="c1">/// Check whether aString is a valid command word.</span>
      <span class="c1">/// Return true if it is, false if it isn&#39;t.</span>
      <span class="k">public</span> <span class="kt">bool</span> <span class="nf">isCommand</span><span class="p">(</span><span class="kt">string</span> <span class="n">aString</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">responses</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="n">aString</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">/// Return the command associated with a command word.</span>
      <span class="c1">///  cmdWord The command word.</span>
      <span class="c1">/// Return the Response for the command.</span>
      <span class="k">public</span> <span class="n">Response</span> <span class="nf">getResponse</span><span class="p">(</span><span class="kt">string</span> <span class="n">cmdWord</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">responses</span><span class="p">[</span><span class="n">cmdWord</span><span class="p">];</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There is even more to recommend this setup:  The old setup had references in multiple places
to various details about the collection of Responses.  That made it harder to follow and
definitely harder to update if you want to add a new command.
Now after writing the new class to respond to a new command,  the <em>only</em> thing you
need to do is add a new instance of that class to the array initializer in the
CommandMapper constructor!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Interfaces never say anything about constructors.  Classes satisfying
an interface can have totally different constructors.</p>
</div>
<p>In the code above,
<code class="docutils literal notranslate"><span class="pre">Quitter</span></code> has a very simple constructor.
(A <code class="docutils literal notranslate"><span class="pre">Quitter</span></code> has no individualized data,
and only has an instance because an interface can
only work with an instance, not with a static class.)
On the other hand the <code class="docutils literal notranslate"><span class="pre">Goer</span></code> and <code class="docutils literal notranslate"><span class="pre">Helper</span></code>
objects need to reference more data to work properly, so they have
parameters.</p>
<p>The revised Xamarin Studio project is <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/csproject_stub">csproject_stub</a> (no 1 this time).</p>
<p>See how the Game class is simplified, too.</p>
<p>Talking about adding commands - these classes could be the basis of a game project for
a small group.  Have any ideas?  See <a class="reference internal" href="../appendix/project.html#group-project"><span class="std std-ref">Group Project</span></a>.
Note that there is a data file in the project directory.
Make sure your project,
like this stub, sets the Output Path to the project folder.</p>
<p>There are further examples of defining and using Interfaces
in the starting code for the exercises at the end of the next section.</p>
<section id="cohesion-coupling-and-separation-of-concerns">
<span id="index-0"></span><h2>Cohesion, Coupling, and Separation of Concerns<a class="headerlink" href="#cohesion-coupling-and-separation-of-concerns" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>This section is motivated by the revisions to the project,
not specifically about Interfaces, though good use of them helps.</p>
<p>There are three important ideas in organizing your code into
classes and methods:</p>
<p><em>Cohesion</em> of code is how focused a portion of code is on a unified purpose.
This applies to both individual methods and to a class.  The higher
the cohesion, the easier it is for you to understand a method or
a class.  Also a cohesive method is easy to reuse in combination
with other cohesive methods.  A method that does several things
is not useful to you if you only want to do one of the things later.</p>
<p><em>Separation of concerns</em> allows most things related to a class to take place in the
class where they are easy to track, separated from other classes.
Data most used by one class should probably reside in that class.
Cohesion is related to separation of concerns:  The data and methods most used
by one class should probably reside in that class, so you do not need to go
looking elsewhere for important parts. Also, if you need to change something,
where concerns are separated into cohesive classes, with the data and
logic in one place, it is easier to see what to change, and the changes are likely
to be able to be kept internal to the class,
affecting only its internal implementation, not its public interface.</p>
<p>Some methods are totally related to the connection between classes, and there may not be
a clear candidate for a class to maximize the separation of concerns.  One thing to
look at is the number of references to different classes.  It is likely that the most
referred to class is the one where the method should reside.</p>
<p><em>Coupling</em> is the connections between classes.  If there were no connections
to a class, no public interface,
it would be useless except all by itself.  The must be some coupling between classes,
where one class uses another, but with increased cohesion and strong
separation of concerns you are likely to be able to have
looser coupling.  Limiting coupling makes it easier to follow
your code.  There is less jumping around. More important, it is easier to
modify the code.  There will be less interfacing between classes, so if
you need to change the public interface of a class, there are fewer places
in other classes that need to be changed to keep in sync.</p>
<p>Aim for strong cohesion, clear separation of concerns, and loose coupling.  Together
they make your code clearer, easier to modify, and easier to debug.</p>
<section id="igame-interface-exercise">
<span id="index-1"></span><span id="id2"></span><h3>IGame Interface Exercise<a class="headerlink" href="#igame-interface-exercise" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>On a much smaller scale than the project, this exercise offers you
experience
writing classes implementing and using an interface.</p>
<ol class="arabic">
<li><p>Copy project stub <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/igame_stub">igame_stub</a> to your own project,
and modify it as
discussed below.</p></li>
<li><p>Look at the IGame interface in <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/igame_stub/i_game.cs">i_game.cs</a>.
Then look at <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/igame_stub/addition_game.cs">addition_game.cs</a>,
that implements the interface. See how a new <code class="docutils literal notranslate"><span class="pre">AdditionGame</span></code> can be added to list of
<code class="docutils literal notranslate"><span class="pre">IGame</span></code>‚Äòs. Run <code class="file docutils literal notranslate"><span class="pre">play_games.cs</span></code>. Randomly choosing a game when there is
only one to choose from is pretty silly, but it gives you a start on a
more elaborate list of games.  The <code class="docutils literal notranslate"><span class="pre">PopRandom</span></code> method is a good general
model for choosing, removing, and returning a random element.</p></li>
<li><p>Write several very simple classes implementing the IGame interface,
and modify Main in <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/igame_stub/play_games.cs">play_games.cs</a>
to create and add a new game of each
type. (Test adding one at a time.)</p>
<p>One such game to create with little more work would be a variation on
instance based Guessing Game <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/instance_version/guess_game.cs">instance_version/guess_game.cs</a>.
You need to make slight modifications.
You could make Play return the opposite of the number of guesses,
so more guesses does generate a worse score. Note that you could not use the
original static game version:  Only objects can satisfy an interface.</p>
</li>
</ol>
</section>
<section id="bisection-with-function-interface-exercise">
<span id="bisection-exercise"></span><h3>Bisection With Function Interface Exercise<a class="headerlink" href="#bisection-with-function-interface-exercise" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>See <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/bisection_method/bisection_method.cs">bisection_method/bisection_method.cs</a>. Identify the interface.
See how two new classes satisfy the interface, while the rest of the
code in these classes is quite different:  One has an instance variable
and an explicit constructor, while the other does not.
See that the <code class="docutils literal notranslate"><span class="pre">Bisection</span></code> function
now has a parameter for an object containing the mathematical function to
use for root finding:  <code class="docutils literal notranslate"><span class="pre">Bisection</span></code> is now a generally useful method,
not just tied to one hard-coded function that might have a root.</p>
<p>Add a new class satisfying the <code class="docutils literal notranslate"><span class="pre">Function</span></code> interface; add a test in <code class="docutils literal notranslate"><span class="pre">Main</span></code>.
Try a function with multiple roots in the original interval and see what happens.
Then, using <em>distinct</em> intervals in different tests,
find different roots of the same function.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fractions-revisited.html" class="btn btn-neutral float-left" title="Rationals Revisited" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reviewinterfaces.html" class="btn btn-neutral float-right" title="Chapter Review Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2021, Andrew N. Harrington and George Thiruvathukal.
      <span class="lastupdated">Last updated on 30-November-2021 00:21:57.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>